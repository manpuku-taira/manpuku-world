<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Manpuku World</title>
  <link rel="stylesheet" href="./style.css?v=50001" />
</head>
<body>

  <!-- TITLE -->
  <div id="title" class="screen active">
    <div class="titleWrap">
      <div class="logoBox">
        <div class="logoMain">Manpuku World</div>
        <div class="logoSub">マンプクワールド</div>
        <div class="logoTags">
          <div class="tag">CYBER FANTASY</div>
          <div class="tag">AI DUEL</div>
          <div class="tag">SCROLL VIEW（iPhone対応）</div>
        </div>
        <div class="mini">画面タップ または START で開始</div>
        <div style="margin-top:14px;">
          <button id="btnStart" class="btn primary">START</button>
        </div>
        <div id="boot" class="mini" style="margin-top:12px;">JS: …</div>
      </div>
    </div>
  </div>

  <!-- GAME -->
  <div id="game" class="screen">

    <!-- HUD -->
    <div class="hud">
      <div class="hudLeft">
        <div id="chipTurn" class="chip">TURN 1</div>
        <div id="chipPhase" class="chip subtle">START</div>
      </div>
      <div class="hudCenter">
        <div id="firstInfo">先攻：—</div>
      </div>
      <div class="hudRight">
        <div id="chipActive" class="chip chipActive">YOUR TURN</div>
        <button id="btnLog" class="iconBtn" title="ログ（長押し）">LOG</button>
        <button id="btnHelp" class="iconBtn" title="ヘルプ">?</button>
        <button id="btnSettings" class="iconBtn" title="設定">⚙</button>
      </div>
    </div>

    <!-- ENEMY HAND (top) -->
    <div class="enemyHandDock">
      <div id="enemyHandLabel" class="enemyHandLabel">ENEMY HAND ×0</div>
      <div id="aiHand" class="enemyHand"></div>
    </div>

    <!-- MAIN SCROLL AREA -->
    <div class="playArea" id="playArea">

      <!-- ENEMY MAT -->
      <section class="matPanel enemy" aria-label="enemy mat">
        <div class="matHead">
          <div class="matTitle">ENEMY FIELD</div>
        </div>

        <div class="matBody">
          <div class="piles">
            <button class="pileBtn" id="aiDeckBtn" say="D">
              <div class="pileTag">DECK</div>
              <div class="pileCard back" id="aiDeckFace"></div>
              <div class="pileN" id="aiDeckN">0</div>
            </button>

            <button class="pileBtn" id="aiWingBtn" say="W">
              <div class="pileTag">WING</div>
              <div class="pileCard face" id="aiWingFace"></div>
              <div class="pileN" id="aiWingN">0</div>
            </button>

            <button class="pileBtn" id="aiOutBtn" say="O">
              <div class="pileTag">OUT</div>
              <div class="pileCard face" id="aiOutFace"></div>
              <div class="pileN" id="aiOutN">0</div>
            </button>
          </div>

          <div class="zones">
            <div class="zoneRow">
              <div class="zoneLabel">ENEMY C（キャラクター）</div>
              <div id="aiC" class="slotRow enemy"></div>
            </div>

            <div class="zoneRow">
              <div class="zoneLabel">ENEMY E（エフェクト/アイテム）</div>
              <div id="aiE" class="slotRow enemy"></div>
            </div>

            <div class="zoneRow">
              <div class="zoneLabel">ENEMY SHIELD</div>
              <div id="aiS" class="slotRow shieldRow"></div>
            </div>
          </div>
        </div>
      </section>

      <div class="divider">
        <div class="dividerLine"></div>
        <div class="dividerText">VS</div>
        <div class="dividerLine"></div>
      </div>

      <!-- YOU MAT -->
      <section class="matPanel you" aria-label="your mat">
        <div class="matHead">
          <div class="matTitle">YOUR FIELD</div>
          <div id="announce" class="announce">準備完了</div>
        </div>

        <div class="matBody">
          <div class="piles">
            <button class="pileBtn" id="pDeckBtn" say="D">
              <div class="pileTag">DECK</div>
              <div class="pileCard back" id="pDeckFace"></div>
              <div class="pileN" id="pDeckN">0</div>
            </button>

            <button class="pileBtn" id="pWingBtn" say="W">
              <div class="pileTag">WING</div>
              <div class="pileCard face" id="pWingFace"></div>
              <div class="pileN" id="pWingN">0</div>
            </button>

            <button class="pileBtn" id="pOutBtn" say="O">
              <div class="pileTag">OUT</div>
              <div class="pileCard face" id="pOutFace"></div>
              <div class="pileN" id="pOutN">0</div>
            </button>
          </div>

          <div class="zones">
            <div class="zoneRow">
              <div class="zoneLabel">YOUR C（キャラクター）</div>
              <div id="pC" class="slotRow"></div>
            </div>

            <div class="zoneRow">
              <div class="zoneLabel">YOUR E（エフェクト/アイテム）</div>
              <div id="pE" class="slotRow"></div>
            </div>

            <div class="zoneRow">
              <div class="zoneLabel">YOUR SHIELD</div>
              <div id="pS" class="slotRow shieldRow"></div>
            </div>
          </div>
        </div>
      </section>

      <div class="bottomPad"></div>
    </div>

    <!-- HAND (bottom fixed area) -->
    <div class="handDock">
      <div class="handTopBar">
        <div class="handTitle">HAND</div>
        <div class="handHint">タップ=選択 / 長押し=詳細</div>
      </div>
      <div id="hand" class="hand"></div>
    </div>

    <!-- ACTION BAR (fixed, not overlapping hand taps) -->
    <div class="actionBar">
      <button id="btnNext" class="actBtn">次のフェイズ</button>
      <button id="btnEnd" class="actBtn danger">ターン終了</button>
    </div>

  </div>

  <!-- Viewer -->
  <div id="viewerM" class="modal">
    <div class="back" data-close="viewer"></div>
    <div class="box">
      <div class="boxHead">
        <div id="viewerTitle" class="boxTitle">CARD</div>
        <button class="btn small ghost" data-close="viewer">閉じる</button>
      </div>
      <div class="viewerBody">
        <img id="viewerImg" alt="" />
        <div id="viewerText" class="viewerText"></div>
      </div>
    </div>
  </div>

  <!-- Zone -->
  <div id="zoneM" class="modal">
    <div class="back" data-close="zone"></div>
    <div class="box smallBox">
      <div class="boxHead">
        <div id="zoneTitle" class="boxTitle">ZONE</div>
        <button class="btn small ghost" data-close="zone">閉じる</button>
      </div>
      <div id="zoneList" class="zoneList"></div>
    </div>
  </div>

  <!-- Log -->
  <div id="logM" class="modal">
    <div class="back" data-close="log"></div>
    <div class="box smallBox">
      <div class="boxHead">
        <div class="boxTitle">LOG</div>
        <button class="btn small ghost" data-close="log">閉じる</button>
      </div>
      <div id="logBody" class="logBody"></div>
    </div>
  </div>

  <!-- Confirm -->
  <div id="confirmM" class="modal">
    <div class="back" data-close="confirm"></div>
    <div class="confirmBox">
      <div class="boxHead">
        <div id="confirmTitle" class="boxTitle">確認</div>
        <button class="btn small ghost" data-close="confirm">閉じる</button>
      </div>
      <div id="confirmBody" class="confirmBody"></div>
      <div class="confirmBtns">
        <button id="btnNo" class="btn ghost">キャンセル</button>
        <button id="btnYes" class="btn primary">OK</button>
      </div>
    </div>
  </div>

  <!-- Settings -->
  <div id="settingsM" class="modal">
    <div class="back" data-close="settings"></div>
    <div class="box smallBox">
      <div class="boxHead">
        <div class="boxTitle">設定</div>
        <button class="btn small ghost" data-close="settings">閉じる</button>
      </div>
      <div class="settings">
        <div class="setBlock">
          <div class="setTitle">GitHub Repo（画像自動探索）</div>
          <div class="setRow">
            <input id="repoInput" class="input" placeholder="owner/repo" />
          </div>
          <div class="setRow" style="margin-top:10px;">
            <button id="btnRepoSave" class="btn primary small">保存</button>
            <button id="btnRescan" class="btn small">再スキャン</button>
            <button id="btnClearCache" class="btn small ghost">キャッシュ削除</button>
          </div>
          <div class="setHint">assets/field.*、assets/cards、assets/card_back.* を自動検出します（大小文字・二重拡張子も対応）。</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Help -->
  <div id="helpM" class="modal">
    <div class="back" data-close="help"></div>
    <div class="box smallBox">
      <div class="boxHead">
        <div class="boxTitle">操作</div>
        <button class="btn small ghost" data-close="help">閉じる</button>
      </div>
      <div class="help">
        <div class="helpItem">・手札タップ：選択（紫枠）</div>
        <div class="helpItem">・カード長押し：拡大＆テキスト確認（ATKは現在値を表示）</div>
        <div class="helpItem">・MAIN：キャラ＝C空き枠タップで登場（キャラのみ）</div>
        <div class="helpItem">・MAIN：アイテム/エフェクト＝E空き枠タップ（Eのみ）</div>
        <div class="helpItem">・BATTLE：自分キャラをタップで攻撃者選択 → 相手キャラ or 相手シールドをタップ</div>
        <div class="helpItem">・シールド0：次の攻撃でダイレクト（勝敗）</div>
        <div class="helpItem">・LOG：長押しでログ表示</div>
      </div>
    </div>
  </div>

  <script src="./script.js?v=50001"></script>
</body>
</html>