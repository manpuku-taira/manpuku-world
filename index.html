<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>Manpuku World マンプクワールド</title>
  <link rel="stylesheet" href="./style.css?v=4002" />
</head>
<body>
  <!-- Title -->
  <section id="titleScreen" class="screen active">
    <div class="titlePanel">
      <div class="logo">
        <div class="logoMain">Manpuku World</div>
        <div class="logoSub">マンプクワールド</div>
      </div>

      <div class="titleMeta">
        <div class="pill">カード：長押しで拡大</div>
        <div class="pill">画像が無くてもプレイ確認OK</div>
      </div>

      <button id="btnStart" class="btn primary">画面をタップして開始</button>
      <div class="small" id="bootStatus">JS: 未確認</div>
    </div>
  </section>

  <!-- Game -->
  <section id="gameScreen" class="screen">
    <header class="topbar">
      <div class="left">
        <div class="chip" id="turnChip">TURN 1</div>
        <div class="chip" id="phaseChip">START</div>
        <div class="chip subtle" id="whoChip">YOU</div>
        <div class="chip subtle" id="jsChip">JS: ...</div>
      </div>
      <div class="right">
        <button class="btn" id="btnNextPhase">次のフェイズ</button>
        <button class="btn" id="btnEndTurn">ターン終了</button>
      </div>
    </header>

    <main class="layout">
      <section class="board">
        <div class="playmat" id="playmat">
          <div class="matImg" id="matImg"></div>

          <div class="matGrid">
            <!-- 上段：アウトサイド/ウイング/中央/デッキ（相手） -->
            <div class="cell pile" data-zone="AI_outside"><div class="zTitle">OUTSIDE</div><div class="zCount" id="aiOutsideCount">0</div></div>
            <div class="cell pile" data-zone="AI_wing"><div class="zTitle">WING</div><div class="zCount" id="aiWingCount">0</div></div>
            <div class="cell center"><div class="centerText">MANPUKU</div></div>
            <div class="cell pile" data-zone="AI_deck"><div class="zTitle">DECK</div><div class="zCount" id="aiDeckCount">0</div></div>

            <!-- 2段目：相手ステージ/相手シールド -->
            <div class="cell stage" style="grid-column:1 / span 3;">
              <div class="rowTitle">ENEMY STAGE</div>
              <div class="slots" id="aiStage"></div>
            </div>
            <div class="cell pile shield"><div class="zTitle">SHIELD</div><div class="zCount" id="aiShieldCount">3</div></div>

            <!-- 3段目：自分ステージ/自分シールド -->
            <div class="cell stage" style="grid-column:1 / span 3;">
              <div class="rowTitle">YOUR STAGE</div>
              <div class="slots" id="p1Stage"></div>
            </div>
            <div class="cell pile shield"><div class="zTitle">SHIELD</div><div class="zCount" id="p1ShieldCount">3</div></div>

            <!-- 下段：デッキ/ウイング/アウトサイド（自分）+ ヒント -->
            <div class="cell pile" data-zone="P1_deck"><div class="zTitle">DECK</div><div class="zCount" id="p1DeckCount">0</div></div>
            <div class="cell pile" data-zone="P1_wing"><div class="zTitle">WING</div><div class="zCount" id="p1WingCount">0</div></div>
            <div class="cell pile" data-zone="P1_outside"><div class="zTitle">OUTSIDE</div><div class="zCount" id="p1OutsideCount">0</div></div>
            <div class="cell hint">
              <div class="mini">MAIN：手札をタップ → 空枠をタップで登場</div>
              <div class="mini">BATTLE：自分キャラ → 相手キャラで攻撃</div>
              <div class="mini">長押し：カード拡大</div>
            </div>
          </div>
        </div>
      </section>

      <section class="panel">
        <div class="handHeader">
          <div class="label">HAND</div>
          <div class="sub">画像が無くても名前でプレイできます</div>
        </div>
        <div class="hand" id="hand"></div>

        <div class="logHeader">
          <div class="label">LOG</div>
          <div class="sub">ここに状況が出ます（エラーも表示します）</div>
        </div>
        <div class="log" id="log"></div>
      </section>
    </main>
  </section>

  <!-- Viewer -->
  <div class="modal" id="viewerModal">
    <div class="modalBack" id="viewerClose"></div>
    <div class="modalCard">
      <div class="modalHeader">
        <div class="modalTitle" id="viewerTitle">CARD</div>
        <button class="btn small" id="viewerCloseBtn">閉じる</button>
      </div>
      <div class="viewerBody">
        <img id="viewerImg" alt="card" />
        <div class="viewerText" id="viewerText"></div>
      </div>
    </div>
  </div>

  <!-- Confirm -->
  <div class="modal" id="confirmModal">
    <div class="modalBack" id="confirmBack"></div>
    <div class="modalCard smallCard">
      <div class="modalHeader"><div class="modalTitle">確認</div></div>
      <div class="confirmBody" id="confirmText">攻撃しますか？</div>
      <div class="confirmBtns">
        <button class="btn danger" id="confirmYes">YES</button>
        <button class="btn" id="confirmNo">NO</button>
      </div>
    </div>
  </div>

  <script src="./script.js?v=4002"></script>
</body>
</html>