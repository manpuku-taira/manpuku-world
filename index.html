<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no" />
  <meta name="theme-color" content="#060814" />
  <title>Manpuku World</title>
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <!-- Title -->
  <section id="title" class="screen active">
    <div class="titleCard">
      <div class="titleLogo">MANPUKU WORLD</div>
      <div class="titleSub">iPhone First / Scroll Stable</div>
      <div class="titleBtns">
        <button id="btnStart" class="btn primary">START</button>
        <button id="btnSettingsOpen" class="btn">設定</button>
        <button id="btnHelpOpen" class="btn">ルール</button>
      </div>
      <div id="boot" class="boot">読み込み中…</div>
    </div>
  </section>

  <!-- Game -->
  <section id="game" class="screen">
    <!-- sticky top HUD -->
    <header class="hud">
      <div class="hudLeft">
        <div class="chip" id="chipTurn">TURN 1</div>
        <div class="chip" id="chipPhase">START</div>
      </div>
      <div class="hudMid">
        <div class="chip active" id="chipActive">YOUR TURN</div>
        <div class="firstInfo" id="firstInfo"></div>
      </div>
      <div class="hudRight">
        <button id="btnLog" class="hudBtn">LOG</button>
        <button id="btnHelp" class="hudBtn">HELP</button>
        <button id="btnSettings" class="hudBtn">SET</button>
      </div>
    </header>

    <!-- board (scroll area) -->
    <main class="board">
      <!-- Field image is NOT background: it is an IMG underlay -->
      <img id="fieldImg" class="fieldImg" alt="" />

      <!-- ENEMY -->
      <section class="side enemy">
        <div class="rowTitle">
          <div class="rowName">ENEMY</div>
          <div class="miniCounts">
            <span>DECK <b id="aiDeckN">0</b></span>
            <span>WING <b id="aiWingN">0</b></span>
            <span>OUT <b id="aiOutN">0</b></span>
          </div>
        </div>

        <div class="zones">
          <div class="zoneBlock">
            <div class="zoneLabel">C</div>
            <div class="zoneGrid" id="aiC"></div>
          </div>
          <div class="zoneBlock">
            <div class="zoneLabel">E</div>
            <div class="zoneGrid" id="aiE"></div>
          </div>
          <div class="zoneBlock">
            <div class="zoneLabel">SHIELD</div>
            <div class="zoneGrid small" id="aiS"></div>
          </div>
        </div>

        <div class="piles">
          <button class="pileBtn" id="aiDeckBtn">
            <div class="pileFace back" id="aiDeckFace"></div>
            <div class="pileCap">DECK</div>
          </button>
          <button class="pileBtn" id="aiWingBtn">
            <div class="pileFace" id="aiWingFace"></div>
            <div class="pileCap">WING</div>
          </button>
          <button class="pileBtn" id="aiOutBtn">
            <div class="pileFace" id="aiOutFace"></div>
            <div class="pileCap">OUT</div>
          </button>
        </div>

        <div class="enemyHandLine">
          <div class="enemyHandLabel" id="enemyHandLabel">ENEMY HAND ×0</div>
          <div class="enemyHand" id="aiHand"></div>
        </div>
      </section>

      <!-- Divider -->
      <div class="divider"></div>

      <!-- YOU -->
      <section class="side you">
        <div class="rowTitle">
          <div class="rowName">YOU</div>
          <div class="miniCounts">
            <span>DECK <b id="pDeckN">0</b></span>
            <span>WING <b id="pWingN">0</b></span>
            <span>OUT <b id="pOutN">0</b></span>
          </div>
        </div>

        <div class="zones">
          <div class="zoneBlock">
            <div class="zoneLabel">C</div>
            <div class="zoneGrid" id="pC"></div>
          </div>
          <div class="zoneBlock">
            <div class="zoneLabel">E</div>
            <div class="zoneGrid" id="pE"></div>
          </div>
          <div class="zoneBlock">
            <div class="zoneLabel">SHIELD</div>
            <div class="zoneGrid small" id="pS"></div>
          </div>
        </div>

        <div class="piles">
          <button class="pileBtn" id="pDeckBtn">
            <div class="pileFace back" id="pDeckFace"></div>
            <div class="pileCap">DECK</div>
          </button>
          <button class="pileBtn" id="pWingBtn">
            <div class="pileFace" id="pWingFace"></div>
            <div class="pileCap">WING</div>
          </button>
          <button class="pileBtn" id="pOutBtn">
            <div class="pileFace" id="pOutFace"></div>
            <div class="pileCap">OUT</div>
          </button>
        </div>
      </section>
    </main>

    <!-- sticky bottom controls (never overlaps hand) -->
    <footer class="bottom">
      <div class="announce" id="announce">準備中…</div>

      <div class="handWrap">
        <div class="handHint">HAND（タップ=選択 / 長押し=詳細）</div>
        <div class="hand" id="hand"></div>
      </div>

      <div class="actions">
        <button id="btnNext" class="btn primary">NEXT</button>
        <button id="btnEnd" class="btn danger">END</button>
      </div>
    </footer>
  </section>

  <!-- Modals -->
  <div class="modal" id="viewerM">
    <div class="modalCard">
      <div class="modalHead">
        <div class="modalTitle" id="viewerTitle">CARD</div>
        <button class="x" data-close="viewer">×</button>
      </div>
      <div class="modalBody">
        <img id="viewerImg" class="viewerImg" alt="" />
        <pre id="viewerText" class="viewerText"></pre>
      </div>
    </div>
  </div>

  <div class="modal" id="zoneM">
    <div class="modalCard">
      <div class="modalHead">
        <div class="modalTitle" id="zoneTitle">ZONE</div>
        <button class="x" data-close="zone">×</button>
      </div>
      <div class="modalBody">
        <div id="zoneList" class="zoneList"></div>
      </div>
    </div>
  </div>

  <div class="modal" id="confirmM">
    <div class="modalCard">
      <div class="modalHead">
        <div class="modalTitle" id="confirmTitle">確認</div>
        <button class="x" data-close="confirm">×</button>
      </div>
      <div class="modalBody">
        <div id="confirmBody" class="confirmBody"></div>
        <div class="confirmBtns">
          <button id="btnNo" class="btn">キャンセル</button>
          <button id="btnYes" class="btn primary">OK</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="settingsM">
    <div class="modalCard">
      <div class="modalHead">
        <div class="modalTitle">設定</div>
        <button class="x" data-close="settings">×</button>
      </div>
      <div class="modalBody">
        <div class="formRow">
          <div class="label">GitHub Repo（owner/repo）</div>
          <input id="repoInput" class="input" placeholder="manpuku-taira/manpuku-world" />
        </div>
        <div class="formBtns">
          <button id="btnRepoSave" class="btn primary">保存</button>
          <button id="btnRescan" class="btn">画像再取得</button>
          <button id="btnClearCache" class="btn danger">キャッシュ削除</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="helpM">
    <div class="modalCard">
      <div class="modalHead">
        <div class="modalTitle">ルール（簡易）</div>
        <button class="x" data-close="help">×</button>
      </div>
      <div class="modalBody help">
        <ul>
          <li>フェーズ：START → DRAW → MAIN → BATTLE → END</li>
          <li>MAIN：手札選択→C（キャラ）またはE（効果/装備）をタップ</li>
          <li>BATTLE：自分Cをタップして攻撃者選択→相手C/シールドをタップ</li>
          <li>シールド：相手Cが0の時のみ攻撃可能。破壊したシールドは相手手札へ</li>
          <li>相手シールド0で次の攻撃がダイレクト＝勝敗</li>
          <li>長押しでカード詳細表示</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="modal" id="logM">
    <div class="modalCard">
      <div class="modalHead">
        <div class="modalTitle">LOG（長押しで表示）</div>
        <button class="x" data-close="log">×</button>
      </div>
      <div class="modalBody">
        <div id="logBody" class="logBody"></div>
      </div>
    </div>
  </div>

  <script src="./script.js"></script>
</body>
</html>